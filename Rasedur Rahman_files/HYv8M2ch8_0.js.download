if (self.CavalryLogger) { CavalryLogger.start_js(["nnRI7"]); }

__d("LiveVideoUFIAnnouncementFetcherQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"scale",type:"Float",defaultValue:null},{kind:"LocalArgument",name:"surface",type:"VideoAnnouncementSurface",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"id"}],c=[{kind:"Variable",name:"video_announcement_surface",variableName:"surface"}],d={kind:"ScalarField",alias:null,name:"accent_color",args:null,storageKey:null},e={kind:"ScalarField",alias:null,name:"broadcast_subscription_status",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"cta_action",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"cta_glyph",args:null,storageKey:null},h={kind:"ScalarField",alias:null,name:"cta_glyph_off",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"cta_link",args:null,storageKey:null},j={kind:"ScalarField",alias:null,name:"cta_state",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"cta_text_off",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"cta_text_on",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"glyph_name",args:null,storageKey:null},n={kind:"LinkedField",alias:null,name:"image",storageKey:null,args:[{kind:"Variable",name:"scale",variableName:"scale"}],concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},o={kind:"ScalarField",alias:null,name:"level",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"message",args:null,storageKey:null},q={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"LiveVideoUFIAnnouncementFetcherQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"video",storageKey:null,args:b,concreteType:"Video",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"announcements",storageKey:null,args:c,concreteType:"VideoAnnouncementsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"VideoAnnouncementsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"VideoAnnouncement",plural:!1,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,{kind:"LinkedField",alias:null,name:"target",storageKey:null,args:null,concreteType:null,plural:!1,selections:[r]}]}]}]}]}]},operation:{kind:"Operation",name:"LiveVideoUFIAnnouncementFetcherQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"video",storageKey:null,args:b,concreteType:"Video",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"announcements",storageKey:null,args:c,concreteType:"VideoAnnouncementsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"VideoAnnouncementsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"VideoAnnouncement",plural:!1,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,{kind:"LinkedField",alias:null,name:"target",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},r]}]}]}]},r]}]},params:{operationKind:"query",name:"LiveVideoUFIAnnouncementFetcherQuery",id:"2021170354599625",text:null,metadata:{}}}}();e.exports=a}),null);
__d("LiveVideoUFIAnnouncement_announcement.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"LiveVideoUFIAnnouncement_announcement",type:"VideoAnnouncement",metadata:null,argumentDefinitions:[{kind:"RootArgument",name:"scale",type:"Float"}],selections:[{kind:"ScalarField",alias:null,name:"accent_color",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"broadcast_subscription_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"cta_action",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"cta_glyph",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"cta_glyph_off",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"cta_link",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"cta_state",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"cta_text_off",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"cta_text_on",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"glyph_name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:[{kind:"Variable",name:"scale",variableName:"scale"}],concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"level",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"message",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"target",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("UFI2SubscriptionCounter",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a){return g.get(a)||{count:0,subscription:null}}function a(a,b){__p&&__p();var c=h(a),d=c.subscription;c=c.count;var e=!1;g.set(a,{count:c+1,subscription:c===0?b():d});return{dispose:function(){var b=h(a),c=b.subscription;b=b.count;if(e||c==null||b===0)return;e=!0;g.set(a,{count:b-1,subscription:b===1?c.dispose():c})}}}e.exports={subscribeOnce:a}}),null);
__d("LiveVideoUFIAnnouncement.react",["cx","FlexibleBlock.react","InlineBlock.react","JSResource","React","UFI2CometRelayCreateFragmentContainer","UFICommentLiveVideoAnnouncementImage.react","lazyLoadComponent","nullthrows","LiveVideoUFIAnnouncement_announcement.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("UFI2CometRelayCreateFragmentContainer").graphql;var i=b("lazyLoadComponent")(b("JSResource")("UFILiveVideoAnnouncementCTAContainer.react").__setRef("LiveVideoUFIAnnouncement.react")),j=b("React").useMemo;h!==void 0?h:h=b("LiveVideoUFIAnnouncement_announcement.graphql");function k(a){if(a.length>=8){var b=a.replace("#","");return"#"+b.slice(2)+b.slice(0,2)}return"#"+a.replace("#","")}function a(a){var c,d=j(function(){var c;return{accentColor:a.announcement.accent_color!=null?k(a.announcement.accent_color):"#B2B2B2",body:a.announcement.message,broadcastSubscriptionStatus:b("nullthrows")(a.announcement.broadcast_subscription_status,"Expected a `broadcast_subscription_status`."),ctaAction:b("nullthrows")(a.announcement.cta_action,"Expected a `cta_action`."),ctaGlyphName:a.announcement.cta_glyph,ctaGlyphNameOff:a.announcement.cta_glyph_off,ctaLink:a.announcement.cta_link,ctaState:Boolean(a.announcement.cta_state),ctaTextOff:a.announcement.cta_text_off||"",ctaTextOn:a.announcement.cta_text_on||"",ftentidentifier:a.legacyFeedbackID,glyphName:b("nullthrows")(a.announcement.glyph_name,"Expected a `glyph_name`."),id:a.legacyFeedbackID+((c=a.announcement.name)!=null?c:"UNKNOWNNAME")+((c=a.announcement.level)!=null?c:"UNKNOWNLEVEL"),image:a.announcement.image,isAnnouncement:!0,isJoinEvent:!1,targetID:(c=a.announcement.target)==null?void 0:c.id}},[a.announcement,a.legacyFeedbackID]);return(c=b("React")).jsxs(b("FlexibleBlock.react"),{className:"_7m_7",flex:b("FlexibleBlock.react").FLEX.right,children:[c.jsx("div",{className:"_7m_8",children:c.jsx(b("UFICommentLiveVideoAnnouncementImage.react"),{accentColor:d.accentColor,contextArgs:null,glyphName:d.glyphName,image:d.image,isJoinEvent:!1})}),c.jsx("div",{children:c.jsxs("div",{className:"_7m_9",children:[c.jsx(b("InlineBlock.react"),{alignv:"middle",height:0,children:a.announcement.message}),c.jsx(c.Suspense,{fallback:c.jsx("span",{}),children:c.jsx(i,{comment:d,contextArgs:null})})]})})]})}e.exports=a}),null);
__d("LiveVideoUFIAnnouncementFetcher",["regeneratorRuntime","ActorURIConfig","ErrorUtils","RelayFBOperationLoader","RelayFBResponseCache","RelayModern","RelayRuntime","ServerTime","SubscriptionList","clearTimeout","createRelayFBNetwork","createRelayFBNetworkFetch","createRelayFBSubscribeFunction","resolveImmediate","setTimeoutAcrossTransitions","stableStringify","LiveVideoUFIAnnouncementFetcherQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("RelayModern").fetchQuery;b("RelayModern").graphql;var j=b("RelayRuntime").Environment,k=b("RelayRuntime").RecordSource,l=b("RelayRuntime").Store,m=g!==void 0?g:g=b("LiveVideoUFIAnnouncementFetcherQuery.graphql"),n={};a=function(){__p&&__p();var a=c.prototype;a.$11=function(){var a=this,c=this.$3,d=this.$2.length>0?3e4:1e4;d=c==null?0:Math.max(0,d-(Date.now()-c));d===0?this.$12():this.$5=b("setTimeoutAcrossTransitions")(function(){a.$12()},d)};a.$12=function(){__p&&__p();var a,c,d,e,f,g,h,j,k,l,n,o,p;return b("regeneratorRuntime").async(function(q){__p&&__p();while(1)switch(q.prev=q.next){case 0:q.prev=0;c=this.$2;if(!(c.length>0)){q.next=6;break}a=c.shift();q.next=12;break;case 6:q.next=8;return b("regeneratorRuntime").awrap(i(this.$1,m,this.$9,{force:!0}));case 8:f=q.sent,g=(d=f.video)==null?void 0:(e=d.announcements)==null?void 0:e.edges,h=g&&g.map(function(a){a=a.node;return a}).filter(Boolean),h!=null&&h.length>0&&(a=h.shift(),(j=this.$2).push.apply(j,h));case 12:this.$3=Date.now();a&&((k=a,l=k.level,n=k.name),o=this.$6.findIndex(function(a){a=a.node;return a.level===l&&a.name===n}),o!==-1?this.$6[o].node=a:(p={node:a,time:Math.floor(b("ServerTime").getMillis()/1e3)},this.$6.push(p)),this.$8.fireCallbacks([].concat(this.$6)));this.$4===!1&&this.$11();q.next=21;break;case 17:q.prev=17,q.t0=q["catch"](0),this.$3=Date.now(),this.$4===!1&&this.$11();case 21:case"end":return q.stop()}},null,this,[[0,17]])};function c(a,c){__p&&__p();var d=this;this.$2=[];this.$3=null;this.$4=!1;this.$5=null;this.$6=[];this.$7=null;this.$10=function(){d.$4=!1,d.$7=Date.now(),d.$11()};this.$13=function(){d.$4=!0,d.$5!=null&&(b("clearTimeout")(d.$5),d.$5=null)};var e=new k();e=new l(e,{gcReleaseBufferSize:10,gcScheduler:b("resolveImmediate"),operationLoader:b("RelayFBOperationLoader")});var f=b("createRelayFBNetwork")(b("createRelayFBNetworkFetch")({getAdditionalData:function(){var c;return c={},c[b("ActorURIConfig").PARAMETER_ACTOR]=a,c},queryResponseCache:b("RelayFBResponseCache")}),b("createRelayFBSubscribeFunction")({}));this.$1=new j({configName:"LiveVideoUFIAnnouncementFetcherEnvironment",network:f,operationLoader:b("RelayFBOperationLoader"),store:e});this.$8=new(b("SubscriptionList"))(this.$10,this.$13);this.$9=c}a.subscribe=function(a){a=(h||(h=b("ErrorUtils"))).guard(a,"LiveVideoUFIAnnouncementFetcher#subscribe");this.$6.length>0&&a(this.$6);return this.$8.add(a)};c.getInstance=function(a,d){var e=b("stableStringify")([a,d]),f=n[e];f==null&&(f=new c(a,d),n[e]=f);return f};return c}();e.exports=a}),null);
__d("useUFI2AutoScroller.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(d=b("React")).useCallback,h=d.useContext,i=d.useEffect,j=d.useRef,k=d.useState,l=150,m=d.createContext({containerRef:{current:null},isAutoScrollPaused:!1,lastChildRef:{current:null},setNumChildrenSincePaused:function(){}});function a(a){__p&&__p();var c=h(m),d=c.containerRef,e=c.isAutoScrollPaused,f=c.lastChildRef,g=c.setNumChildrenSincePaused;i(function(){__p&&__p();if(!e){d.current!=null&&(d.current.scrollTop=d.current.scrollHeight);return}var c=b("React").Children.map(a,function(a){return a.key}),h=f.current;f.current=c[c.length-1];if(h!=null){var i=0;for(var j=c.length-1;j>=0;--j)if(h!==c[j])i++;else break;g(function(a){return a+i})}},[a,d,e,f,g]);return a}function c(a,c){__p&&__p();c===void 0&&(c=l);var d=j(null),e=j(null),f=k(!1),h=f[0],n=f[1];f=k(0);var o=f[0],p=f[1];f=g(function(){if(d.current==null)return;d.current.scrollTop=d.current.scrollHeight;n(!1)},[]);var q=g(function(){if(d.current==null)return;var a=d.current.scrollHeight-(d.current.scrollTop+d.current.clientHeight)>c;h!==a&&n(a)},[h,c]);i(function(){h||(p(0),e.current=null)},[h]);a=b("React").jsx(m.Provider,{value:{containerRef:d,isAutoScrollPaused:h,lastChildRef:e,setNumChildrenSincePaused:p},children:a});return{childrenWithContext:a,containerRef:d,handleScroll:q,isAutoScrollPaused:h,numChildrenSincePaused:o,scrollToBottom:f}}e.exports={useAutoScrollChildren:a,useUFI2AutoScroller:c}}),null);