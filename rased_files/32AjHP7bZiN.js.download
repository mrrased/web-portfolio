if (self.CavalryLogger) { CavalryLogger.start_js(["O7LVj"]); }

__d("LiveVideoBroadcastUtilsStreamMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"LiveVideoStreamCreateData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"live_video_stream_create",storageKey:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"LiveVideoStreamCreateResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"input_stream",storageKey:null,args:null,concreteType:"LiveVideoInputStream",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:"stream_url",name:"rtmp_ingest_url",args:[{kind:"Literal",name:"ssl_behavior",value:"NO_SSL"}],storageKey:'rtmp_ingest_url(ssl_behavior:"NO_SSL")'},{kind:"ScalarField",alias:"secure_stream_url",name:"rtmp_ingest_url",args:[{kind:"Literal",name:"ssl_behavior",value:"USE_SSL"}],storageKey:'rtmp_ingest_url(ssl_behavior:"USE_SSL")'}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"LiveVideoBroadcastUtilsStreamMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"LiveVideoBroadcastUtilsStreamMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"LiveVideoBroadcastUtilsStreamMutation",id:"2565147680198528",text:null,metadata:{}}}}();e.exports=a}),null);
__d("LiveVideoBroadcastFunnelLogger",["ComposerSourceSurface","ComposerXMarauderLogger","FunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="FACECAST_BROADCASTER_FUNNEL";a=!1;var h={composerID:null,maybeStartAndLaunchLiveComposer:function(a){this.composerID=a,b("FunnelLogger").getFunnelInstance(g)||h._startInternal(h._getSourceSurface(a)),b("FunnelLogger").appendAction(g,"launch_live_composer")},startFromLiveMapAndSelectLiveAttachment:function(){h._startInternal("live_map"),b("FunnelLogger").appendAction(g,"select_live_attachment")},addFunnelTags:function(a){a.forEach(function(a){return b("FunnelLogger").addFunnelTag(g,a)})},fetchedBroadcastID:function(a){b("FunnelLogger").appendAction(g,"fetched_broadcast_id"),b("FunnelLogger").addFunnelTag(g,"broadcast_id:"+a)},endWithFailedBroadcastID:function(){b("FunnelLogger").appendAction(g,"failed.broadcast_id"),b("FunnelLogger").appendAction(g,"failed"),h.end()},uploadStarted:function(){b("FunnelLogger").appendAction(g,"upload_started")},goLiveClicked:function(){b("FunnelLogger").appendAction(g,"go_live_clicked")},goLiveCancelled:function(){b("FunnelLogger").appendAction(g,"go_live_cancelled")},finishClicked:function(){b("FunnelLogger").appendAction(g,"finish_clicked")},endFinishedFromUser:function(){b("FunnelLogger").appendAction(g,"finished.from_user"),b("FunnelLogger").appendAction(g,"finished"),h.end()},endPublishFailed:function(){b("FunnelLogger").appendAction(g,"failed.publish"),b("FunnelLogger").appendAction(g,"failed"),h.end()},requestCameraAccess:function(){b("FunnelLogger").appendAction(g,"request_camera_access")},cameraPermissionDenied:function(){b("FunnelLogger").appendAction(g,"camera_permission_denied")},endCameraNotFound:function(){b("FunnelLogger").appendAction(g,"failed.no_camera"),b("FunnelLogger").appendAction(g,"failed"),h.end()},endMicrophoneNotFound:function(){b("FunnelLogger").appendAction(g,"failed.no_microphone"),b("FunnelLogger").appendAction(g,"failed"),h.end()},endCouldNotStart:function(){b("FunnelLogger").appendAction(g,"failed.could_not_start"),b("FunnelLogger").appendAction(g,"failed"),h.end()},foundCamera:function(){b("FunnelLogger").appendAction(g,"found_camera")},trackEnded:function(){b("FunnelLogger").appendAction(g,"track_ended"),b("FunnelLogger").appendAction(g,"failed")},connectionBroken:function(){b("FunnelLogger").appendAction(g,"connection_broken")},endCopyrightViolation:function(){b("FunnelLogger").appendAction(g,"failed.copyright_violation"),b("FunnelLogger").appendAction(g,"failed"),h.end()},end:function(){b("FunnelLogger").endFunnel(g)},endConnectionFailed:function(){b("FunnelLogger").appendAction(g,"failed.connection_failed"),b("FunnelLogger").appendAction(g,"failed"),h.end()},setInputSource:function(a){b("FunnelLogger").appendAction(g,"set_input_souce_"+a)},setContentTags:function(){b("FunnelLogger").appendAction(g,"set_content_tags")},setBroadcastState:function(a){b("FunnelLogger").appendAction(g,"set_broadcast_state:"+a)},errorCreatingBroadcast:function(){b("FunnelLogger").appendAction(g,"failed.error_creating_broadcast"),b("FunnelLogger").appendAction(g,"failed"),h.end()},errorStartingAPIBroadcast:function(){b("FunnelLogger").appendAction(g,"error_starting_api_broadcast")},endMutationFailed:function(){b("FunnelLogger").appendAction(g,"error_ending_broadcast_mutation")},clickFinishButton:function(){b("FunnelLogger").appendAction(g,"click_finish_button")},updateSourceTag:function(){__p&&__p();var a=b("FunnelLogger").getFunnelInstance(g);if(a){a=a.getTags();if(a){a=Object.keys(a);for(var c=0;c<a.length;c++){var d=a[c];if(d.indexOf("source:")!==-1)return}}d=h._getSourceSurface(this.composerID);d&&d!=="unknown"&&b("FunnelLogger").addFunnelTag(g,"source:"+d)}},_getSourceSurface:function(a){a=b("ComposerXMarauderLogger").getInstance(a);return a?a.composerSourceSurface:null},_startInternal:function(a){b("FunnelLogger").startFunnel(g),b("FunnelLogger").setFunnelTimeout(g,86400),a&&b("FunnelLogger").addFunnelTag(g,"source:"+a)}};e.exports=h}),null);
__d("ReactComposerLiveVideoActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({PREVIEW_ERROR:null,PREVIEW_STARTED:null,SET_PREVIOUS_ATTACHMENT:null,SET_TAGGERS_CONFIG:null,SET_SHOW_NUX:null,SET_FUNNEL_TAGS:null},"ReactComposerLiveVideoActionType")}),null);
__d("ReactComposerLiveVideoActionStore",["Bootloader","LiveVideoBroadcastActions","LiveVideoBroadcastDispatcher","LiveVideoBroadcastFunnelLogger","LiveVideoBroadcastUtils","ReactComposerActionStore","ReactComposerLiveVideoActionType"],(function(a,b,c,d,e,f){__p&&__p();var g=273465416184080;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;c=a.call(this,function(){return{}},function(a){switch(a.type){case b("ReactComposerLiveVideoActionType").PREVIEW_STARTED:d&&d.$ReactComposerLiveVideoActionStore1(a);break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.$ReactComposerLiveVideoActionStore2=function(a,c,d,e,f){b("LiveVideoBroadcastUtils").fetchUIConfig(a,f,c,d,e),b("LiveVideoBroadcastFunnelLogger").fetchedBroadcastID(c)};d.$ReactComposerLiveVideoActionStore1=function(a){__p&&__p();a=this.validateAction(a,["actorID","composerID","composerType","config","targetID","isRehearsal"]);var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],i=a[5],j=this.$ReactComposerLiveVideoActionStore3(f.attachmentsConfig.LIVE_VIDEO),k=this.$ReactComposerLiveVideoActionStore2.bind(this);b("Bootloader").loadModules(["ModernLiveVideoCreateMutation","RelayFBEnvironment","VideoBroadcastInfraType","VideoBroadcastInitialStatus"],function(a,l,m,n){__p&&__p();var o=h===c?{privacy:{base_state:"SELF"}}:{to_id:h};a.commit(l,{actorID:c,audience:o,broadcastInfraType:m.RTMP,numHosts:j,overrideAppID:g,videoBroadcastInitialStatus:n.PREVIEW,isRehearsal:i},{onCompleted:function(a){__p&&__p();b("Bootloader").loadModules(["LiveVideoBroadcastAPIBroadcastStore"],function(g){__p&&__p();b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([g]);g=a==null?void 0:a.live_video_create;var j=g==null?void 0:g.video_broadcast_id,l=g==null?void 0:g.stream_settings;if(!(g&&j&&l))return;var m=b("LiveVideoBroadcastUtils").getComposerFormData(d,h,f.contextInfo);k(c,j,e,m,h);m=(m=g.video)==null?void 0:m.input_streams;m=m!=null?m.nodes[0].dash_ingest_url:void 0;b("LiveVideoBroadcastActions").apiBroadcastCreated(c,j,{primaryStreamURL:g.rtmp_stream_url||"",primarySecureStreamURL:g.rtmp_secure_stream_url||"",backupStreamURL:(j=g.stream_settings)==null?void 0:j.redundant_stream_urls[0],backupSecureStreamURL:l.redundant_secure_stream_urls[0]||void 0,dashIngestURL:m||void 0},((j=g.video)==null?void 0:j.id)||"",h,((m=g.video)==null?void 0:m.embedded_html)||"","",i,!!l.allow_unsecure_rtmp)},"ReactComposerLiveVideoActionStore")},onError:b("LiveVideoBroadcastUtils").handleCreateBroadcastError})},"ReactComposerLiveVideoActionStore");b("Bootloader").loadModules(["LiveVideoBroadcastAPIBroadcastStore"],function(){},"ReactComposerLiveVideoActionStore")};d.$ReactComposerLiveVideoActionStore3=function(a){var b=!1;Object.prototype.hasOwnProperty.call(a,"bootstrapData")?b=a.bootstrapData.isRedundancyEnabled:Object.prototype.hasOwnProperty.call(a,"gks")&&(b=a.gks.is_redundancy_enabled);return b?2:1};return c}(b("ReactComposerActionStore"));e.exports=new a()}),null);
__d("ReactComposerLiveVideoAttachmentStore",["ReactComposerLiveVideoActionType","ReactComposerStoreBase"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;c=a.call(this,function(){return{liveVideoTaggersConfig:{},isPreviewStarted:!1,showLivePreviewButtonNUX:!1,funnelTags:[]}},function(a){__p&&__p();switch(a.type){case b("ReactComposerLiveVideoActionType").SET_PREVIOUS_ATTACHMENT:d&&d.$ReactComposerLiveVideoAttachmentStore1(a);break;case b("ReactComposerLiveVideoActionType").SET_TAGGERS_CONFIG:d&&d.$ReactComposerLiveVideoAttachmentStore2(a);break;case b("ReactComposerLiveVideoActionType").PREVIEW_ERROR:d&&d.$ReactComposerLiveVideoAttachmentStore3(a);break;case b("ReactComposerLiveVideoActionType").PREVIEW_STARTED:d&&d.$ReactComposerLiveVideoAttachmentStore4(a);break;case b("ReactComposerLiveVideoActionType").SET_SHOW_NUX:d&&d.$ReactComposerLiveVideoAttachmentStore5(a);break;case b("ReactComposerLiveVideoActionType").SET_FUNNEL_TAGS:d&&d.$ReactComposerLiveVideoAttachmentStore6(a);break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.getPreviousAttachment=function(a){return this.getComposerData(a).liveVideoPreviousAttachment};d.getTaggersConfig=function(a){return this.getComposerData(a).liveVideoTaggersConfig};d.isPreviewStarted=function(a){return this.getComposerData(a).isPreviewStarted};d.getShowNUX=function(a){return this.getComposerData(a).showLivePreviewButtonNUX};d.getFunnelTags=function(a){return this.getComposerData(a).funnelTags};d.$ReactComposerLiveVideoAttachmentStore1=function(a){var b=this.getComposerData(a.composerID);b.liveVideoPreviousAttachment=a.previousAttachment;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore2=function(a){var b=this.getComposerData(a.composerID);b.liveVideoTaggersConfig=a.taggersConfig;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore4=function(a){var b=this.getComposerData(a.composerID);b.isPreviewStarted=!0;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore3=function(a){var b=this.getComposerData(a.composerID);b.isPreviewStarted=!1;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore5=function(a){var b=this.getComposerData(a.composerID);b.showLivePreviewButtonNUX=a.showNUX;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore6=function(a){var b=this.getComposerData(a.composerID);b.funnelTags=a.funnelTags;this.emitChange(a.composerID)};return c}(b("ReactComposerStoreBase"));e.exports=new a()}),null);
__d("ReactComposerLiveVideoActions",["ReactComposerDispatcher","ReactComposerLiveVideoActionType","ReactComposerLiveVideoActionStore","ReactComposerLiveVideoAttachmentStore","setTimeout"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerLiveVideoActionStore");b("ReactComposerLiveVideoAttachmentStore");a={previewStarted:function(a,c){b("setTimeout")(function(){return b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveVideoActionType").PREVIEW_STARTED,actorID:c.actorID,composerType:c.composerType,config:c.config,targetID:c.targetID,isRehearsal:c.isRehearsal})},0)},setPreviousAttachment:function(a,c){a={composerID:a,type:b("ReactComposerLiveVideoActionType").SET_PREVIOUS_ATTACHMENT,previousAttachment:c};b("ReactComposerDispatcher").dispatch(a)},setTaggersConfig:function(a,c){a={composerID:a,type:b("ReactComposerLiveVideoActionType").SET_TAGGERS_CONFIG,taggersConfig:c};b("ReactComposerDispatcher").dispatch(a)},setShowNUX:function(a,c){a={composerID:a,type:b("ReactComposerLiveVideoActionType").SET_SHOW_NUX,showNUX:c};b("ReactComposerDispatcher").dispatch(a)},setFunnelTags:function(a,c){a={composerID:a,type:b("ReactComposerLiveVideoActionType").SET_FUNNEL_TAGS,funnelTags:c};b("ReactComposerDispatcher").dispatch(a)}};e.exports=a}),null);
__d("XLiveVideoBroadcastCreateQuickLoadUIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/live/broadcast/quick_load_ui/",{container_id:{type:"String"}})}),null);
__d("XLiveVideoBroadcastCreateUIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/broadcast/dialog/",{target_id:{type:"Int"},broadcast_id:{type:"Int"},composer_type:{type:"String"},description:{type:"String"},place:{type:"Int"},og_action_type_id:{type:"Int"},og_object_id:{type:"Int"},og_object_str:{type:"String"},og_icon_id:{type:"Int"},with_tags:{type:"FBIDSet"},composertags_sponsors:{type:"FBIDSet"},direct_share_status:{type:"Int"},sponsor_relationship:{type:"Int"}})}),null);
__d("LiveVideoBroadcastUtils",["ix","cx","errorCode","errorDesc","fbt","Promise","ActorURI","AsyncRequest","Bootloader","CSS","DialogX","DOM","Image.react","LayerDestroyOnHide","LayerHideOnTransition","Link.react","LiveProducerTypedLoggerLite","LiveVideoBroadcastActions","LiveVideoBroadcastAPIActions","LiveVideoBroadcastConstants","LiveVideoBroadcastDispatcher","LiveVideoBroadcastFunnelLogger","LiveVideoBroadcastLiveProducerUtils","React","ReactComposerActions","ReactComposerAttachmentType","ReactComposerLiveVideoActions","ReactComposerLiveVideoAttachmentStore","ReactComposerLoggingName","ReactComposerPostDataUtils","ReactComposerPrefillUtils","ReactComposerTaggerActions","ReactComposerTaggerType","ReactComposerTargetingUtils","ReactDOM","RelayFBEnvironment","RelayModern","Style","URI","VideoPollsTypedLogger","XCometLiveProducerControllerRouteBuilder","XGamesVideoStreamerDashboardController","XLiveVideoBroadcastCreateQuickLoadUIController","XLiveVideoBroadcastCreateUIController","XMediaManagerController","XUISpinner.react","fbglyph","gkx","isBusinessURI","uniqueID","LiveVideoBroadcastUtilsStreamMutation.graphql"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=b("LiveProducerTypedLoggerLite").log,o=b("LiveVideoBroadcastLiveProducerUtils").setLiveProducerOptInPreference,p=b("RelayModern").commitMutation;b("RelayModern").graphql;var q=b("LiveVideoBroadcastConstants").BROADCAST_STATE,r=b("LiveVideoBroadcastConstants").INPUT_SOURCE,s=b("LiveVideoBroadcastConstants").CAMERA_STATE,t=3e4;function a(a){__p&&__p();var b={};if(!a)return b;for(var a=a.values(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e.type==="ssrc"?b["ssrc_"+e.mediaType]=e:e.type==="VideoBwe"?b.video_bwe=e:e.id&&e.id.indexOf("outbound")!==-1&&(b[e.id]=e)}return b}function u(a,c){b("ReactComposerTaggerActions").setTaggerData(a.composerID,b("ReactComposerLoggingName").STICKER_SPROUT,b("ReactComposerTaggerType").STICKER,null);var d=b("ReactComposerLiveVideoAttachmentStore").getFunnelTags(a.composerID);b("LiveVideoBroadcastFunnelLogger").maybeStartAndLaunchLiveComposer(a.composerID);d&&b("LiveVideoBroadcastFunnelLogger").addFunnelTags(d);v(a,c);b("ReactComposerLiveVideoActions").previewStarted(a.composerID,{actorID:a.actorID,composerType:a.composerType,config:c,targetID:a.targetID,isRehearsal:(d=c.isRehearsal)!=null?d:!1})}function v(a,c){b("Bootloader").loadModules(["LiveVideoBroadcastUIStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastLoggingStore","ReactComposerAudienceActions"],function(b,d,e,f){I.__createDialogImpl(a,c,b,d,e,f)},"LiveVideoBroadcastUtils")}function c(a,c,d,e,f,h){__p&&__p();b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([d,e,f]);e=a.composerID;e&&h.setCollectionIDWithoutLogging(e,null);b("LiveVideoBroadcastActions").initialize({});f=d.get("pendingCleanup");if(f){b("LiveVideoBroadcastActions").finishedCleanup();return}h={fixedTopPosition:42,width:500,xui:!0,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerHideOnTransition")]};e=b("uniqueID")();d=b("DOM").create("div");var i=new(b("DialogX"))(h,d);f=i.getRoot();f!=null&&(b("CSS").addClass(f,"_2k_g"),b("CSS").conditionClass(f,"_72fs",a.composerType==="games_video_streamer_dashboard"));h=function(){i.destroy();var c=a.composerID;c&&b("ReactComposerActions").reset(c)};b("ReactDOM").render(b("React").jsx("div",{"data-testid":"live_control_panel_container",children:b("React").jsxs("div",{id:e,children:[b("React").jsx(b("XUISpinner.react"),{"data-testid":"broadcast_ui_loading_indicator",background:"dark",className:"_275v",size:"large"}),b("React").jsx(b("Link.react"),{className:"_2k_f",href:"#",onClick:h,children:b("React").jsx(b("Image.react"),{alt:k._("Close"),src:g("125922")})})]})}),d);b("Style").set(i.getContentRoot(),"width","100%");i.show();f=a.actorID;h=b("XLiveVideoBroadcastCreateQuickLoadUIController").getURIBuilder();d=b("ActorURI").create(h.getURI(),f);new(b("AsyncRequest"))().setURI(d).setData({container_id:e}).setMethod("GET").setReadOnly(!0).setErrorHandler(I.handleCreateBroadcastError).setTimeoutHandler(t,b("LiveVideoBroadcastActions").cleanup).send();h=c.attachmentsConfig[b("ReactComposerAttachmentType").LIVE_VIDEO].streamSettings;f=c.attachmentsConfig[b("ReactComposerAttachmentType").LIVE_VIDEO].gks;b("LiveVideoBroadcastActions").updateBroadcastUIConfig({streamSettings:h,gks:f});b("LiveVideoBroadcastActions").setDialog(i);b("LiveVideoBroadcastActions").setDialogContainerID(e);b("LiveVideoBroadcastActions").setComposerConfig({config:c,contextConfig:a,composerID:a.composerID})}function w(a,c,d,e,f){var g=b("XLiveVideoBroadcastCreateUIController").getURIBuilder();g=b("ActorURI").create(g.getURI(),a);new(b("AsyncRequest"))().setURI(g).setData({target_id:c,broadcast_id:d,container_id:null,composer_type:e,description:f.description,place:f.place,og_action_type_id:f.og_action_type_id,og_object_id:f.og_object_id,og_object_str:f.og_object_str,og_icon_id:f.og_icon_id,with_tags:f.with_tags,composertags_sponsors:f.composertags_sponsors,direct_share_status:f.direct_share_status,sponsor_relationship:f.sponsor_relationship}).setMethod("POST").send()}function d(a){__p&&__p();a=a.error;b("LiveVideoBroadcastActions").errorCreatingBroadcast(a);var c;switch(a){case 1404078:c=j._(function(a,b){return a._("You have been temporarily blocked from performing this action.")},{});break;case 1363083:c=j._(function(a,b){return a._("This user cannot create a live video.")},{});break;default:c=k._("Error creating live video");break}alert(c);b("LiveVideoBroadcastActions").cleanup()}function f(a,c,d,e){__p&&__p();a=b("ReactComposerPostDataUtils").getPostData({composerID:a,targetID:c,composerConfig:{contextInfo:d}});c={};Object.assign(c,{description:a.xhpc_message,is_explicit_place:a.is_explicit_place,place:a.composertags_place,composertags_sponsors:a.composertags_sponsors,direct_share_status:a.direct_share_status,sponsor_relationship:a.sponsor_relationship});a.object_id.length>0?c.og_object_id=a.object_id[0]:a.object_str.length>0&&(c.og_object_str=a.object_str[0]);a.action_type_id.length>0&&(c.og_action_type_id=a.action_type_id[0]);a.icon_id&&(c.og_icon_id=a.icon_id);a.privacyx&&!e&&(c.privacyx=a.privacyx);a.composertags_with.length>0&&(c.with_tags=a.composertags_with);a.political_district_info&&a.political_district_info.politicalDistrict&&(c.political_district=a.political_district_info.politicalDistrict);a.feed_targeted_data&&(c.targeted_privacy_data=a.feed_targeted_data);a.targeted_privacy_data&&(c.targeted_privacy_data=a.targeted_privacy_data);a.breaking_news_selected&&a.breaking_news_expiration&&(c.breaking_news_expiration=a.breaking_news_expiration);a.charity_id&&(c.charity_id=a.charity_id);a.group_join_target_id&&(c.group_join_target_id=a.group_join_target_id);a.stars_is_enabled&&(c.stars_is_enabled=a.stars_is_enabled);c.remove_group_join_cta=a.remove_group_join_cta;return c}function h(a,c,d,e){b("LiveVideoBroadcastActions").setDescription({description:a,shortDescription:c}),b("LiveVideoBroadcastActions").setTagList(d),b("LiveVideoBroadcastActions").setPrivacySelector(e)}function i(a){b("LiveVideoBroadcastActions").setAPIBroadcastPrivacySelector(a)}function x(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,t,u,x,y,z,A,B,C,D,E){__p&&__p();b("Bootloader").loadModules(["LiveVideoBroadcastUIStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastMetadataInputStore","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastIDStore","ReactComposerStatusActions"],function(F,G,H,J,K,L){__p&&__p();b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([F,G,H,J,K]);E!=null?b("LiveVideoBroadcastActions").initialize({inputSource:E}):b("LiveVideoBroadcastActions").initialize({inputSource:m?r.EDIT_SCHEDULE:r.EDIT});v(a.contextConfig,a.config);F=I.getComposerFormData(a.composerID,a.contextConfig.targetID,a.config.contextInfo);L.setMentionsSource(a.composerID,a.bootstrapData.attachmentData.mentionsSource);b("LiveVideoBroadcastActions").setPeopleTaggerSource(a.bootstrapData.attachmentData.taggersSource.PEOPLE);G={mentionsInput:{textWithEntities:j,focusedOnLoad:!0},taggersData:k};b("ReactComposerPrefillUtils").prefill(a.composerID,G,a.contextConfig.gks);if(l){H=l.sex[0]==="male"?1:l.sex[0]==="female"?2:null;J={gating:babelHelpers["extends"]({},l,{excluded_geo_locations:{cities:l.excluded_cities.map(function(a){return{key:a}}),countries:l.excluded_countries,regions:l.excluded_regions.map(function(a){return{key:a}}),zips:l.excluded_zipcodes.map(function(a){return{key:a}})},genders:H?[H]:void 0})};b("ReactComposerTargetingUtils").setData(a.composerID,J)}w(a.contextConfig.actorID,a.contextConfig.targetID,c,a.contextConfig.composerType,F);b("LiveVideoBroadcastActions").setBroadcastID(c);b("LiveVideoBroadcastActions").setBroadcastState(m?q.PREVIEW:q.LIVE);b("LiveVideoBroadcastActions").updateCameraState(s.BROADCAST);b("LiveVideoBroadcastActions").setVideoID(d);b("LiveVideoBroadcastActions").setStartTime(e);b("LiveVideoBroadcastActions").requestUFI();b("LiveVideoBroadcastActions").setPrivacySelector(f);b("LiveVideoBroadcastActions").setVideoTitle(g);b("LiveVideoBroadcastActions").setGame(h);b("LiveVideoBroadcastActions").setContentTags(i);b("LiveVideoBroadcastActions").updateBroadcastUIConfig({isCrosspost:u,accessToken:B});b("LiveVideoBroadcastActions").apiBroadcastCreated(a.contextConfig.actorID,c,{primaryStreamURL:n||"",primarySecureStreamURL:o||"",backupStreamURL:y||void 0,backupSecureStreamURL:z||void 0},d,a.contextConfig.targetID,x,"",A,C);b("LiveVideoBroadcastActions").setScheduledLiveData(p,t);b("LiveVideoBroadcastAPIActions").setSelectedEncoderType(D)},"LiveVideoBroadcastUtils")}function y(a,c,d,e){__p&&__p();b("Bootloader").loadModules(["LiveVideoBroadcastUIStore","ReactComposerStatusActions","LiveVideoBroadcastMetadataInputStore"],function(f,g,h){__p&&__p();b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([f,h]);b("LiveVideoBroadcastActions").setPeopleTaggerSource(a.bootstrapData.attachmentData.taggersSource.PEOPLE);b("LiveVideoBroadcastActions").setHideInputToggle(!!d);c&&b("LiveVideoBroadcastActions").setInputSource(c);g.setMentionsSource(a.composerID,a.bootstrapData.attachmentData.mentionsSource);a.game&&b("LiveVideoBroadcastActions").setGame(a.game);f={mentionsInput:{textWithEntities:e,focusedOnLoad:!0}};b("ReactComposerPrefillUtils").prefill(a.composerID,f,a.contextConfig.gks);a.isRehearsal&&(a.config.isRehearsal=a.isRehearsal);u(a.contextConfig,a.config)},"LiveVideoBroadcastUtils")}function z(a){b("LiveVideoBroadcastActions").setInviteFriendsSuggestions(a)}function A(a){b("Bootloader").loadModules(["LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastMetadataInputStore","LiveVideoBroadcastUIStore","LiveVideoBroadcastCrosspostStore"],function(c,d,e,f,g){b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([c,d,e,f,g]),b("LiveVideoBroadcastActions").updateBroadcastUIConfig(a)},"LiveVideoBroadcastUtils")}function B(a,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();b("Bootloader").loadModules(["LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastMetadataInputStore","LiveVideoBroadcastUIStore","ReactComposerStatusActions","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastCrosspostStore"],function(n,o,p,q,r,s){__p&&__p();b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([n,o,p,r,s]);(n=b("LiveVideoBroadcastActions")).initialize({});n.setComposerConfig({config:e.config,contextConfig:e.contextConfig,composerID:e.composerID});n.updateBroadcastUIConfig(c);n.setPeopleTaggerSource(e.bootstrapData.attachmentData.taggersSource.PEOPLE);o=r.getState().toObject();p=o.isRehearsal;n.setHideInputToggle(!0);n.setInputSource("API");n.apiBroadcastCreated(a,f,{primaryStreamURL:g,primarySecureStreamURL:h,backupStreamURL:m||void 0,backupSecureStreamURL:void 0},i,j,k,l,p,Boolean(c.allowUnsecureRTMP));q.setMentionsSource(e.composerID,e.bootstrapData.attachmentData.mentionsSource);s=b("XLiveVideoBroadcastCreateQuickLoadUIController").getURIBuilder();r=b("ActorURI").create(s.getURI(),a);new(b("AsyncRequest"))().setURI(r).setData({container_id:d}).setMethod("GET").setReadOnly(!0).send()},"LiveVideoBroadcastUtils")}function C(a,c){return new(b("Promise"))(function(d,e){p(b("RelayFBEnvironment"),{mutation:l!==void 0?l:l=b("LiveVideoBroadcastUtilsStreamMutation.graphql"),variables:{input:{broadcast_id:a,actor_id:c}},onCompleted:function(a){return d((a=a.live_video_stream_create)==null?void 0:a.input_stream)},onError:e})})}function D(a,c,d,e){e=e===q.LIVE||e===q.FINISHED;new(b("VideoPollsTypedLogger"))().setEvent("www_live_composer_add_question_tapped").setOwnerID(c==null?d:c).setVideoID(a).setDerivedFieldsInputMap({poll_creation_source:"WWW_LIVE_OPS_COMPOSER"}).setPollCreationType(e?"attached":"detached").log()}function E(a){n({video_id:a.videoID,broadcast_id:a.broadcastID,event:a.event,event_source:"legacy_ui",broadcast_status:a.broadcastStatus})}function F(a){if(a==null)return null;return b("gkx")("1237352")?b("XMediaManagerController").getURIBuilder().setFBID("selected_single_page_id",a).setString("tab","streaming_live_dashboard").getURI().getQualifiedURI().toString():b("XGamesVideoStreamerDashboardController").getURIBuilder().setString("page",a).getURI().getQualifiedURI().toString()}function G(a){a=new(m||(m=b("URI")))(a).getQualifiedURI();return b("isBusinessURI")(a)?a.setSubdomain("www").toString():a.toString()}function H(a){__p&&__p();var c=a.contextConfig,d=a.videoID;a=a.targetID;if(d==null)return;o("OPT_IN");if((c==null?void 0:c.composerType)==="games_video_streamer_dashboard"){b("LiveVideoBroadcastActions").hideWarningOnExit();a=(c=F(a))!=null?c:window.location.href;c={videoID:d,referral_url:a};a=b("XCometLiveProducerControllerRouteBuilder").buildURL(c);c=G(a);(m||(m=b("URI"))).go(c)}else{a={videoID:d};c=b("XCometLiveProducerControllerRouteBuilder").buildURL(a);d=G(c);(m||(m=b("URI"))).goURIOnNewWindow(d)}}var I={fetchUIConfig:w,handleCreateBroadcastError:d,reduceWebRTCStats:a,startPreviewUI:u,getComposerFormData:f,updateBroadcastUIState:h,updateApiBroadcastPrivacySelector:i,startEditLiveUIFromServer:x,startPreviewUIFromServer:y,updateInviteFriendsSuggestions:z,updateBroadcastUIConfig:A,__createDialogImpl:c,initializeSocialPlugin:B,createInputStream:C,logEnterPollDraft:D,logProducerEvent:E,navigateToLiveProducer:H};e.exports=I}),null);
__d("LivingRoomFullScreenController",["csx","cx","CSS","DialogX","DOM","DOMQuery"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.show=function(a){this.$1&&this.$1.destroy();this.$1=new(b("DialogX"))({width:876},a);a=this.$1.getRoot();a!=null&&b("CSS").setClass(a,"_6te5");this.$1&&this.$1.show();var c=b("DOMQuery").find(document.body,"._li");b("DOM").appendContent(c,a)};c.close=function(){this.$1&&this.$1.destroy(),this.$1=null};return a}();e.exports=new a()}),null);
__d("LivingRoomLiveClockHelper",["LiveClock"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=null,this.$2=!1}var c=a.prototype;c.setupClock=function(a,c,d){this.$1=new(b("LiveClock"))(),this.$1.startClock(d),this.$2=c};c.getLiveClockTime=function(){return this.$1&&this.$1.isReady()?Math.round(this.$1.currentTimeMillis()):null};c.getLiveClockTimeForVideoState=function(){return this.$2?this.getLiveClockTime():null};c.getLiveClockTimeString=function(){var a=this.getLiveClockTime();return a!=null?a.toString():null};c.stopClock=function(){this.$1&&this.$1.stopClock()};return a}();e.exports=new a()}),null);
__d("LivingRoomPresencePollingUtils",["LivingRoomActions","LivingRoomPresenceLatencyLogger","LivingRoomTypedLogger","LivingRoomTypeUtils","RelayFBEnvironment","RelayModern","clearInterval","gkx","qex","setInterval","LivingRoomPresencePollingUtilsQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").fetchQuery;b("RelayModern").graphql;function a(a,c){__p&&__p();var d=null,e=function(){d!=null&&(b("clearInterval")(d),d=null)};return{startPollingIdempotent:function(){__p&&__p();var f;d=(f=d)!=null?f:b("setInterval")(function(){__p&&__p();h(b("RelayFBEnvironment"),g!==void 0?g:g=b("LivingRoomPresencePollingUtilsQuery.graphql"),{livingRoomID:a}).then(function(c){__p&&__p();var d;c=c==null?void 0:c.living_room;if(c==null)return;((d=c.recap)==null?void 0:d.comment_count)!=null&&e();if(b("qex")._("821747"))return;c.is_viewer_present===!0&&b("LivingRoomPresenceLatencyLogger").logPresenceLatency(a);d=b("LivingRoomTypeUtils").convertUsers(((d=(d=c.active_viewers)==null?void 0:d.edges)!=null?d:[]).map(function(a){return a.node}));b("LivingRoomActions").updatePresentUsers(a,d);if(!(b("gkx")("1208662")&&b("gkx")("1113562"))){b("LivingRoomActions").updatePresentUserCount(a,(d=(d=c.active_viewers)==null?void 0:d.count)!=null?d:0)}c=(d=c.feed_presence_users)!=null?d:[];b("LivingRoomActions").setFeedPresenceUsers(a,b("LivingRoomTypeUtils").convertUsers(c))})["catch"](function(c){new(b("LivingRoomTypedLogger"))().setLivingRoomAction("presence_polling_error").setLivingRoomID(a).setErrorMessage(c.message).setErrorStack(c.stack).log()})},c)},stopPolling:e}}e.exports={init:a}}),null);
__d("XLivingRoomDashboardPersonalTabController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/watchparty/personal/",{})}),null);
__d("LivingRoomRedirectCFEPHostUtils",["LivingRoomCreationSource","XLivingRoomDashboardPersonalTabController","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c;if(!a)return!1;switch(a){case"evergreen_qp":return(c=b("qex")._("1187303"))!=null?c:!1;case"ended_living_room_story_cta":case"feed_cta_on_always_show":case"feed_cta_on_comment":case"feed_cta_on_newsfeed":case"feed_cta_on_react":case"feed_cta_on_save":case"feed_cta_on_share":case"feed_cta_on_unknown":case"feed_cta_on_video_press":case"goodwill_throwback_cta":return(c=b("qex")._("1187304"))!=null?c:!1;case"group_active_living_rooms_cta":case"group_active_living_rooms_feed_cta":case"group_active_living_rooms_null_state_cta":return(c=b("qex")._("1187305"))!=null?c:!1;case"group_feed_qp":case"group_mall_video_cta":return(c=b("qex")._("1187306"))!=null?c:!1;case"live_video_cue":case"live_video_cta":case"live_video_godzilla_nux":case"live_video_godzilla_nux_sharesheet":case"live_video_prompt":case"live_video_share_sheet":return(c=b("qex")._("1187307"))!=null?c:!1;case"games_video_rerun_manager":return(c=b("qex")._("1187308"))!=null?c:!1;case"channel_feed_cta":case"end_screen_cta":case"house_ad":case"living_room_endscreen_cta":case"living_room_share_sheet":case"living_room_system_message":case"living_room_video_control_cta":case"notification":case"nt_cvc_bottomsheet":case"nt_watch_tab_cta":case"nt_watching_together":case"nt_watching_together_cta":case"nt_watching_together_groups_tab":case"page_admin_qp":case"page_timeline_video_cta":case"page_video_library_button":case"page_video_library_megaphone":case"pmv_qp":case"portal_facebook_watch_tv_app":case"recommended_share_in_live":case"replay_feed_cta":case"replay_interactive_alert":case"replay_ufi_share":case"saved_bookmark_chevron":case"sotto_catalog_watch_together":case"ufi_share":case"unknown_timeline_video_cta":case"video_insights_dialog":case"video_player_plugin":case"video_player_plugin_dialog":return(c=b("qex")._("1187309"))!=null?c:!1}if(a.includes("_CTA")){return(c=b("qex")._("1187310"))!=null?c:!1}return!1}function c(){return b("XLivingRoomDashboardPersonalTabController").getURIBuilder().getURI()}e.exports={canRedirectCFEPHostToDashboard:a,getDashboardURI:c}}),null);
__d("LivingRoomReplayUFIRenderer.react",["cx","fbt","Env","FBLogger","FeedbackSourceType","JSResource","LivingRoomReplayBackfillCommentList.react","LivingRoomReplayStreamingCommentList.react","React","RelayModern","RelayRuntime","RelayUFI2Environment","UFI2CommentsConfig","UFI2Composer.react","UFI2CreateCommentMutation","UFI2LazyCodedErrorDialog.react","UFI2SurfaceContainerContext","createUFI2ComposerTipPlugin","createUFI2EmojiComposerPlugin","createUFI2EmoticonsComposerPlugin","createUFI2GIFComposerPlugin","createUFI2MentionsComposerPlugin","createUFI2PrefillMentionComposerPlugin","createUFI2StickersComposerPlugin","edgeIsInConnection","getCommentCreateMutationPropertiesFromTrackingData","lazyLoadComponent","nullthrows","LivingRoomReplayUFIRenderer_feedback.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=b("React").useRef,l=b("React").useState;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var m=b("RelayRuntime").ConnectionHandler,n=b("lazyLoadComponent")(b("JSResource")("UFI2CommentEditor.react").__setRef("LivingRoomReplayUFIRenderer.react"));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.state=r(d.props);d.$2=function(a){d.setState({maybeCodedError:{acknowledged:!1,error:a}})};d.$3=function(){d.setState(function(a){return a.maybeCodedError==null?null:{maybeCodedError:babelHelpers["extends"]({},a.maybeCodedError,{acknowledged:!0})}})};d.$4=function(a){d.$1=a};d.$5=function(a){__p&&__p();var c=a.actorID,e=a.clientID,f=a.commentData,g=a.entitiesByID,h=a.environment,i=a.feedbackSource,j=a.getTrackingDataFn;a=a.useDefaultActor;if(!f)return;if(d.props.vpc==null)return;var k=Math.floor(d.props.vpc.getCurrentTimePosition()),l=function(a,c){a=m.getConnection(a,"LivingRoomReplayStreamingCommentList_living_room_replay_timestamped_comments",{living_room_content_item_id:d.props.connectionID,start_time_offset:d.props.startTimeOffset});if(a!=null&&b("edgeIsInConnection")(a,c)===!1){var e=a.getLinkedRecords("edges");if(e==null)return;e.length===0||d.$1!=null?m.insertEdgeBefore(a,c,d.$1):m.insertEdgeAfter(a,c)}};b("UFI2CreateCommentMutation").commit({actorID:c,clientID:e,commentProfilePictureSizeDepth0:b("UFI2CommentsConfig").profilePictureSize32,commentProfilePictureSizeDepth1:b("UFI2CommentsConfig").profilePictureSize20,containerMapping:b("nullthrows")((c=d.context)==null?void 0:c.containerMapping),entitiesByID:g,environment:h,feedbackSource:i,focusCommentID:null,input:babelHelpers["extends"]({},f,{living_room_content_item_id:d.props.contentItemID},b("getCommentCreateMutationPropertiesFromTrackingData")(j),(e={},e[d.props.isLiveStreaming===!0?"live_video_timestamp":"vod_video_timestamp"]=k,e)),isComet:d.context.isComet,updater:l,onError:d.$2,useDefaultActor:a})};d.$1=null;return d}var d=c.prototype;d.render=function(){var a=this.props.feedback.viewer_actor;return a==null?null:b("React").jsxs("div",{children:[b("React").jsx(o,{composerPluginProps:this.state.composerPluginProps,contentItemID:this.props.contentItemID,connectionID:this.props.connectionID,feedback:this.props.feedback,feedbackID:this.props.feedbackID,onCommentCreate:this.$5,onEditCommentError:this.$2,startTimeOffset:this.props.startTimeOffset,updateCurrentCursor:this.$4,vpc:this.props.vpc}),this.state.maybeCodedError&&b("React").jsx(b("UFI2LazyCodedErrorDialog.react"),{error:this.state.maybeCodedError.error,onHide:this.$3,shown:this.state.maybeCodedError.acknowledged===!1})]})};return c}(b("React").Component);c.contextType=b("UFI2SurfaceContainerContext");function o(a){var c=l(null),d=c[0];c=c[1];var e=l(null),f=e[0];e=e[1];var g=k(null),h=k(null),i=a.feedback.viewer_actor,m=function(){return h.current},n=function(a){h.current=a},o=function(){g.current!=null&&(g.current.scrollTop=g.current.scrollHeight)};return b("React").jsxs("div",{children:[b("React").jsxs("div",{className:"_80wz"+((j||(j=b("Env"))).isCQuick?" _8zj5":""),ref:g,children:[b("React").jsx(b("LivingRoomReplayBackfillCommentList.react"),{feedback:a.feedback,onEdit:c,startTimeOffset:a.startTimeOffset,setLastContentItemID:n}),b("React").jsx(b("LivingRoomReplayStreamingCommentList.react"),{vpc:a.vpc,feedback:a.feedback,feedbackID:a.feedbackID,contentItemID:a.contentItemID,connectionID:a.connectionID,getPreviousContentItemID:m,startTimeOffset:a.startTimeOffset,updateCurrentCursor:a.updateCurrentCursor,onNewCommentsAdded:o,onEdit:c})]}),b("React").jsx(p,{composerPluginProps:a.composerPluginProps,editingComment:d,setEditingComment:c,actor:i,onCommentCreate:a.onCommentCreate,onEditCommentError:a.onEditCommentError,feedback:a.feedback,focusCommentID:f,setFocusCommentID:e})]})}function p(a){__p&&__p();var c=a.actor,d=a.composerPluginProps,e=a.editingComment,f=a.feedback,g=a.onCommentCreate,i=a.onEditCommentError,k=a.setEditingComment,l=a.setFocusCommentID;if(c==null)return;if(e!=null){a=e.id;var m=f.id;if(a==null||m==null){b("FBLogger")("living_room_relay").mustfix("Editing comment ID is null, this was served from GraphQL so we should investigate why this is the case, trace value of comment { id }");return null}l(a);return b("React").jsx("div",{className:"_80w-"+((j||(j=b("Env"))).isCQuick?" _8zj6":""),children:b("React").jsx("div",{className:"_80w_",children:b("React").jsx(b("React").Suspense,{fallback:null,children:b("React").jsx(n,babelHelpers["extends"]({},d,{comment:e,commentId:a,commentProfilePictureSizeDepth0:b("UFI2CommentsConfig").profilePictureSize32,commentProfilePictureSizeDepth1:b("UFI2CommentsConfig").profilePictureSize20,depth:0,focusCommentID:a,feedback:f,feedbackTargetID:m,feedbackSource:b("FeedbackSourceType").LIVING_ROOM,onError:i,onFinishEdit:function(){k(null),l(null)},storyRenderLocation:"living_room_replay",placeholder:"",useDefaultActor:!0}))})})})}return b("React").jsx("div",{className:"_80w-"+((j||(j=b("Env"))).isCQuick?" _8zj6":""),children:b("React").jsx("div",{className:"_80w_",children:b("React").jsx(b("UFI2Composer.react"),babelHelpers["extends"]({},d,{actor:c,commentAction:"ADD",depth:0,feedback:f,feedbackSource:b("FeedbackSourceType").LIVING_ROOM,focusCommentID:null,onCommit:g,placeholder:h._("Write something...").toString(),useDefaultActor:!0}))})})}function q(a){return b("RelayUFI2Environment").forActor(a)}function r(a){a=a.feedback;var c=a.mentions_datasource_js_constructor_args_json,d=a.viewer_actor;d=q(d==null?void 0:d.id);return{composerPluginProps:{initialPlugins:[a.composer_tip!=null?b("createUFI2ComposerTipPlugin")({composer_tip:a.composer_tip}):null,b("createUFI2MentionsComposerPlugin")({maxResults:5,mentions_datasource_js_constructor_args_json:c,typeaheadViewProps:{},upgradedPluginResource:b("JSResource")("createUpgradedUFI2MentionsComposerPlugin").__setRef("LivingRoomReplayUFIRenderer.react")})].concat(b("createUFI2EmojiComposerPlugin")({size:16}),[b("createUFI2EmoticonsComposerPlugin")({size:16})],a.can_viewer_comment_with_gif===!0?b("createUFI2GIFComposerPlugin")({ftentidentifier:a.id}):[],a.can_viewer_comment_with_sticker===!0?b("createUFI2StickersComposerPlugin")({environment:d,targetID:(c=a)!=null?(c=c.owning_profile)!=null?c.id:c:c}):[],[b("createUFI2PrefillMentionComposerPlugin")()]).filter(Boolean)},editingCommentID:null,maybeCodedError:null}}e.exports=a(c,{feedback:i!==void 0?i:i=b("LivingRoomReplayUFIRenderer_feedback.graphql")})}),null);
__d("LivingRoomStyle",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHANNEL:"channel",DEFAULT:"default",LOL:"lol",MESSENGER:"messenger",PAGE:"page",USER:"user"})}),null);
__d("LivingRoomStyleKeys",["LivingRoomStyle","keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")(b("LivingRoomStyle"))}),null);
__d("LivingRoomVideoEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADDED_VIDEO:"ADDED_VIDEO",APPROVED_BY_ADMIN:"APPROVED_BY_ADMIN",CANCEL_AUTO_PLAY:"CANCEL_AUTO_PLAY",COMMENTATING_START:"COMMENTATING_START",COMMENTATING_STOP:"COMMENTATING_STOP",CREATOR_FIRST_JOINED:"CREATOR_FIRST_JOINED",DESCRIPTION_EDITED:"DESCRIPTION_EDITED",EMPTY_QUEUE:"EMPTY_QUEUE",ENABLED_AUTO_PLAY:"ENABLED_AUTO_PLAY",DISABLED_AUTO_PLAY:"DISABLED_AUTO_PLAY",GUEST_JOINED:"GUEST_JOINED",NON_GROUP_MEMBER_GUEST_JOINED:"NON_GROUP_MEMBER_GUEST_JOINED",PAUSED:"PAUSED",PLAY_AUTO_PLAYED_VIDEO:"PLAY_AUTO_PLAYED_VIDEO",PLAY_DIRECT:"PLAY_DIRECT",PLAY_FROM_QUEUE:"PLAY_FROM_QUEUE",PLAY_NEXT_AUTO:"PLAY_NEXT_AUTO",PLAY_START:"PLAY_START",PLAYING:"PLAYING",POLL_CREATE:"POLL_CREATE",POLL_VOTE_ADD:"POLL_VOTE_ADD",PROMOTED_COHOST:"PROMOTED_COHOST",QUEUE_ALMOST_EMPTIED:"QUEUE_ALMOST_EMPTIED",REMOVED_VIDEO:"REMOVED_VIDEO",REMOVED_VIDEO_WITH_PLAY:"REMOVED_VIDEO_WITH_PLAY",REPLAY_SYSTEM_MESSAGE:"REPLAY_SYSTEM_MESSAGE",REQUEST_COHOST_PROMOTION:"REQUEST_COHOST_PROMOTION",REVOKED_COHOST:"REVOKED_COHOST",SEEK_BACKWARD:"SEEK_BACKWARD",SEEK_FORWARD:"SEEK_FORWARD",SESSION_END:"SESSION_END",SESSION_START:"SESSION_START",SHOW_INVITE_ONLINE_FRIENDS_PROMPT:"SHOW_INVITE_ONLINE_FRIENDS_PROMPT",SHOW_SHARESHEET_PROMPT:"SHOW_SHARESHEET_PROMPT",SUGGESTED_VIDEO:"SUGGESTED_VIDEO",WAVE_SEND:"WAVE_SEND"})}),null);
__d("LivingRoomVideoStateUtils",["LivingRoomConstants","LivingRoomLiveClockHelper"],(function(a,b,c,d,e,f){__p&&__p();a={getUpdatedTimePosition:function(a){__p&&__p();var c=a.markerOffsetSeconds,d=a.videoPlayerState;if(d==="PAUSED")return c;d=a.live_clock_timestamp_ms;var e=b("LivingRoomLiveClockHelper").getLiveClockTimeForVideoState();if(d!=null&&e!=null){e=e-d;return c+e/1e3-a.live_commentating_delay_ms/1e3}else{d=a.currentServerTimestamp;e=a.eventLoggedTimestamp;var f=a.clientReceivedTimestamp;return c+(d-e)+(Date.now()/1e3-f)-a.live_commentating_delay_ms/1e3}},isNewContentItemPlayEvent:function(a){return a.videoPlayerState==="PLAYING"&&a.markerOffsetSeconds===b("LivingRoomConstants").VIDEO_START_SECONDS}};e.exports=a}),null);
__d("LivingRoomViewerFunnelLogger",["CurrentUser","WebFunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("CurrentUser").getID(),h;function a(){new(b("WebFunnelLogger"))("LivingRoomViewerFunnelDefinition").setAction("leave").setSessionKey(g).addFunnelPayload("living_room_id",h).markEnd().log(),g=b("CurrentUser").getID(),h=null}function c(a,c,d){g=c,h=d,new(b("WebFunnelLogger"))("LivingRoomViewerFunnelDefinition").setAction(a).setSessionKey(g).addFunnelPayload("living_room_id",h).markStart().log()}function d(a){new(b("WebFunnelLogger"))("LivingRoomViewerFunnelDefinition").setAction(a).setSessionKey(g).addFunnelPayload("living_room_id",h).log()}f={startFunnel:c,endFunnel:a,appendAction:d};e.exports=f}),null);
__d("VideoPlayerStates",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({READY:"ready",PLAYING:"playing",PAUSED:"paused",LOADING:"loading",FALLBACK:"fallback",FINISHED:"finished",DESTROYED:"destroyed",REPLAYED:"replayed",UNKNOWN:"unknown"})}),null);
__d("LivingRoomVideoPlayerController",["invariant","LivingRoomVideoEvent","LivingRoomVideoStateUtils","LivingRoomViewerFunnelLogger","VideoFeedRegister","VideoPlayerExperiments","VideoPlayerReasonTransitionHelper","VideoPlayerShakaGlobalConfig","VideoPlayerStates","setTimeout","uuid"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0,i=b("VideoPlayerShakaGlobalConfig").getBool("living_room_convert_ready_state_to_playing_on_seek",!1);a=function(){"use strict";__p&&__p();function a(a,c,d,e,f,g,i,j,k,l,m){__p&&__p();var n=this;this.$12=function(a,b){b=b==="living_room_commentating"?a>=n.$1.getCurrentTimePosition()?"COMMENTATING_START":"COMMENTATING_STOP":a>=n.$1.getCurrentTimePosition()?"SEEK_FORWARD":"SEEK_BACKWARD";n.$2(n.$15(n.$1.getState()),b,a)};this.$13=function(a){if(a==="page_visibility_initiated"){n.$5();return}a==="user_initiated"&&n.$3();n.$16(a,"PLAYING","PLAYING")};this.$14=function(a){if(a==="page_visibility_initiated"){n.$6();return}a==="user_initiated"&&n.$4(a);n.$16(a,"PAUSED","PAUSED")};this.$1=a;this.$2=f;this.$3=j;this.$4=k;this.$5=l;this.$6=m;if(b("VideoPlayerShakaGlobalConfig").getBool("fix_living_room_video_player_psr_logging",!1)){var o=a.play,p=!1;a.play=function(e){var f=b("VideoPlayerShakaGlobalConfig").getBool("living_room_catchup_only_in_feed",!1);f=f?c:!0;if(f&&!p&&d){f=b("LivingRoomVideoStateUtils").getUpdatedTimePosition(d);var g=a.getCurrentTimePosition();(!h||Math.abs(f-g)>=h)&&a.seek(f)}o.call(a,e)};a.runOnceOnApiEventLogged("started_playing",function(){p=!0,b("VideoPlayerShakaGlobalConfig").getBool("living_room_log_initial_video_play",!1)&&!c&&b("LivingRoomViewerFunnelLogger").appendAction("initial_video_play")})}else a.runOnceOnApiEventLogged("started_playing",function(){var e=b("VideoPlayerShakaGlobalConfig").getNumber("living_room_play_x_milliseconds_before_seek",0),f=b("VideoPlayerShakaGlobalConfig").getBool("living_room_no_delayed_seek_if_paused",!1);e>0?b("setTimeout")(function(){(!f||a.isState("playing"))&&n.$8(d)},e):n.$8(d);c||b("LivingRoomViewerFunnelLogger").appendAction("initial_video_play")});a.runOnceOnApiEventLogged("finished_playing",function(){return i(e)});a.runOnApiReady(function(){(!b("VideoPlayerShakaGlobalConfig").getBool("enable_autoplay_controller_for_watch_party_feed_attachment",!1)||!c)&&a.play(new(b("VideoPlayerReasonTransitionHelper"))("autoplay_initiated")),g()});if(c){f={controller:a,viewport_autoplay:b("VideoPlayerShakaGlobalConfig").getBool("enable_autoplay_controller_for_watch_party_feed_attachment",!1),video_ids:[a.getVideoID()]};j={video_container:a.getVideoNode()};b("VideoFeedRegister").registerVideoUnit(j,f);b("VideoPlayerShakaGlobalConfig").getBool("enable_autoplay_controller_for_watch_party_feed_attachment",!1)||(a.addListener("becomeInvisible",function(){return m()}),a.addListener("becomeVisible",function(){n.$7=b("uuid")(),l()}))}if(!b("VideoPlayerExperiments").enableLivingRoomFullscreenFix){(k=this.$1)==null?void 0:k.logEvent("player_format_changed")}}var c=a.prototype;c.getVideoID=function(){return this.$1.getVideoID()};c.updateVideo=function(a,b){b===void 0&&(b=!1);if(b!==!0&&this.$7==null)return;this.$8(a,b)};c.forceUpdateVideo=function(a){this.$8(a)};c.setVolume=function(a){this.$1.setVolume(a)};c.getCurrentMarkerOffsetMs=function(){return this.$1.getCurrentTimePosition()*1e3};c.getCurrentVideoState=function(){return this.$1.getState()};c.destroy=function(){this.$9(),this.$1.destroy()};c.logEvent=function(a){this.$1.logEvent(a)};c.play=function(a){this.$1.play(new(b("VideoPlayerReasonTransitionHelper"))(a))};c.$8=function(a,b){b===void 0&&(b=!1);if(!a)return;if(b!==!0&&this.$7===a.actionID)return;this.$7=a.actionID;this.$9();this.$10(a);this.$11()};c.$10=function(a){var c=a.videoPlayerState;a=b("LivingRoomVideoStateUtils").getUpdatedTimePosition(a);var d=this.$1.isState("playing");this.$1.pause();this.$1.seek(a);c==="PLAYING"?(this.$3(),d&&this.$1.play(new(b("VideoPlayerReasonTransitionHelper"))("autoplay_initiated"))):c==="PAUSED"&&(this.$4("autoplay_initiated"),this.$1.pause())};c.$11=function(){this.$1.addListener("seekRequested",this.$12),this.$1.addListener("playRequested",this.$13),this.$1.addListener("pauseRequested",this.$14)};c.$9=function(){this.$1.removeAllListeners("seekRequested"),this.$1.removeAllListeners("playRequested"),this.$1.removeAllListeners("pauseRequested")};c.$16=function(a,b,c){if(a!=="user_initiated")return;this.$2(b,c,this.$1.getCurrentTimePosition())};c.$15=function(a){var b="PLAYING";switch(a){case"ready":!i&&!h&&g(0,4211,a);break;case"finished":case"playing":break;case"paused":b="PAUSED";break;default:g(0,4211,a)}return b};return a}();e.exports=a}),null);
__d("VideoComponentUnmuteButton.react",["ix","cx","fbt","FDSButton.react","Image.react","React","VideoComponent","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){if(!c.vpc)return;c.vpc.unmute();c.props.onClick()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return!this.props.isShown||!this.vpc||this.vpc.getOption("SottoPaywall","enabled")?null:b("React").jsx("div",{className:"_44cj",children:b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("584770")}),label:i._("Turn On Sound"),size:"large",onClick:this.$1})})};d.disable=function(){};d.enable=function(a){this.vpc=a};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a)}),null);
__d("VideoComponentWithLivingRoomPauseOverlay.react",["ix","cx","fbt","ClickableArea.react","Image.react","React","VideoComponent","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c,d=this.props.isPaused;return(c=b("React")).jsxs(c.Fragment,{children:[c.jsx(b("ClickableArea.react"),{onClick:function(){d&&a.props.canViewerSeeVideoControls&&(a.vpc&&a.vpc.play("user_initiated"))},children:c.jsx("div",{className:d?"_7-g4":""})}),b("React").jsxs("div",{className:"_4fty"+(d?" _4ftz":"")+(d?"":" _4ft-"),children:[b("React").jsx(b("Image.react"),{src:g("681574")}),b("React").jsx("span",{className:"_3-9a",children:i._("{name of presenter} paused the video",[i._param("name of presenter",this.props.presenterName)])})]})]})};d.disable=function(){};d.enable=function(a){this.vpc=a};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a)}),null);
__d("XGroupLivingRoomFullScreenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/{group_id}/wp/{living_room_id}/",{group_id:{type:"FBID",required:!0},living_room_id:{type:"FBID",required:!0},entry_source:{type:"Enum",enumType:1},search_results_session_id:{type:"String"},vpsb_external_log_video_id:{type:"FBID"}})}),null);
__d("XLivingRoomCrosspostingReplaceFullScreenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/living_room/crossposting/replace_active_living_room/",{living_room_id:{type:"FBID",required:!0}})}),null);
__d("XLivingRoomDashboardController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/watchparty/",{referrer:{type:"FBID"}})}),null);
__d("XLivingRoomGametimeLoaderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/living_room/second_screen/gametime_unit/",{metapage_id:{type:"FBID",required:!0}})}),null);
__d("XLivingRoomPendingGroupPostActionButtonsLoaderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/living_room/second_screen/pending_group_post_action_buttons/",{living_room_id:{type:"FBID",required:!0}})}),null);
__d("XLivingRoomShareLivingRoomDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/living_room/share_living_room/",{living_room_id:{type:"FBID",required:!0}})}),null);