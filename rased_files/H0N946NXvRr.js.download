if (self.CavalryLogger) { CavalryLogger.start_js(["\/Vjdj"]); }

__d("PagesHomepagePageletUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAdminMessage=function(a){this.$1.admin_message=a;return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setIsEmbedded=function(a){this.$1.is_embedded=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUserMessage=function(a){this.$1.user_message=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={admin_message:!0,event_name:!0,is_embedded:!0,time:!0,user_message:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerThreadlistFetcher.bs",["Promise","bs_curry","CurrentUser","MessagingTag","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MessengerGraphQLThreadlistFetcher.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(a===b("MessagingTag").INBOX)return"INBOX";else if(a===b("MessagingTag").OTHER)return"OTHER";else if(a===b("MessagingTag").ACTION_ARCHIVED)return"ARCHIVED";else if(a===b("MessagingTag").SPAM)return"SPAM";else if(a===b("MessagingTag").PENDING)return"PENDING";else if(a===b("MessagingTag").PAGE_BACKGROUND)return"PAGE_BACKGROUND";else return}function a(a,c,d,e,f,h,i){__p&&__p();var j=g(c);if(j!==void 0){j=j;e={limit:e,folder:c,tags:d==null?[j]:[j,d],timestamp:f,filter:d,includeDeliveryReceipts:!0,includeSeqID:!1,isWorkUser:b("CurrentUser").isWorkUser(),onlyPinnedThreads:null};b("MessengerGraphQLThreadlistFetcher.bs").fetchAll(a,[e],h,"fetch_threadlist").then(function(c){b("MercuryServerPayloadPreprocessor").getForFBID(a).handleUpdate(Object.assign(c,{payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO}));b("bs_curry")._1(i,!0);return b("Promise").resolve(0)})["catch"](function(a){b("bs_curry")._1(i,!1);return b("Promise").resolve(0)});return 0}else return 0}f.fetchThreadlist=a}),null);
__d("PagesMessagingLoadingRow.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a="_5y2c"+(this.props.useDarkVersion?"":" _4a7c")+(this.props.useDarkVersion?" _4a7d":"");a=b("joinClasses")(a,this.props.className);return b("React").jsx("div",{className:a})};return c}(b("React").Component);e.exports=a}),null);
__d("PagesMessagingRelativeTimestamp.react",["LongLiveTimer","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1e3;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){c=a.call(this,b,c)||this;c.state={relativeTime:c.$1(b.utcTimestamp,b.shouldShorternTime)};return c}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){(a.utcTimestamp!==this.props.utcTimestamp||a.shouldShorternTime!==this.props.shouldShorternTime)&&this.setState({relativeTime:this.$1(a.utcTimestamp,a.shouldShorternTime)})};d.render=function(){return b("React").jsx("div",{className:this.props.className,children:b("React").jsx("abbr",{className:"livetimestamp","data-utime":this.props.utcTimestamp/g,"data-shorten":this.props.shouldShorternTime,children:this.state.relativeTime.text})})};d.$1=function(a,c){return b("LongLiveTimer").renderRelativeTimeToServer(a/g,c)};return c}(b("React").Component);e.exports=a}),null);
__d("PagesMessagingHomePageletLogger",["PagesHomepagePageletUsageTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.$2=function(a,c){a={is_embedded:this.$1,event_name:a};c&&(a=Object.assign(a,c));c=new(b("PagesHomepagePageletUsageTypedLogger"))();c.updateData(a).log()};c.logEvent=function(a){this.$2(a,null)};c.logEventWithUserMessage=function(a,b){this.$2(a,{user_message:b})};c.logReplyMessage=function(a,b,c){this.$2(a,{user_message:b,admin_message:c})};return a}();e.exports=a}),null);
__d("PagesMessagingMessageSnippet.react",["cx","fbt","Image.react","Layout.react","LeftRight.react","MercuryThreadSnippet.react","PagesMessagingLoadingRow.react","PagesMessagingRelativeTimestamp.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("Layout.react").Column,j=b("Layout.react").FillColumn;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("_3sfn",this.props.className);return b("React").jsx("div",{className:a,"data-hover":"tooltip","data-tooltip-content":h._("Click to read and act on the full message."),role:"button",children:this.$1()})};d.$1=function(){return b("React").jsxs(b("Layout.react"),{children:[b("React").jsx(i,{children:this.$2()}),b("React").jsx(j,{children:this.$3()})]})};d.$2=function(){return!this.props.message?b("React").jsx(b("PagesMessagingLoadingRow.react"),{className:(this.props.placement==="aymt_homepage_panel"?"_3fep":"")+(this.props.placement==="admin_hovercard"?" _3feq":"")}):b("React").jsx(b("Image.react"),{className:(this.props.placement==="aymt_homepage_panel"?"_3fep":"")+(this.props.placement==="admin_hovercard"?" _3feq":""),src:this.props.message?this.props.message.senderImageSrc:""})};d.$3=function(){var a=this.props.message;if(!a)return b("React").jsxs("div",{className:"_3sfp",children:[b("React").jsx(b("PagesMessagingLoadingRow.react"),{className:"_3sfq"}),b("React").jsx(b("PagesMessagingLoadingRow.react"),{className:"_3sfr"})]});var c=null;this.props.placement==="admin_hovercard"&&(c=b("React").jsxs(b("LeftRight.react"),{children:[b("React").jsx("div",{className:"_2iz9",children:h._("Latest Unread Message")}),b("React").jsx(b("PagesMessagingRelativeTimestamp.react"),{className:"_2iz6",utcTimestamp:a.thread.last_message_timestamp,shouldShorternTime:!1})]}));return b("React").jsxs("div",{className:"_3sfp",children:[c,b("React").jsx("div",{className:(this.props.placement==="aymt_homepage_panel"?"_3fer":"")+(this.props.placement==="admin_hovercard"?" _3fes":"")+" _3sg9",children:a.senderName}),b("React").jsx(b("MercuryThreadSnippet.react"),{className:"_3sga _3sg9",participants:a.participants,shouldRenderYou:!1,thread:a.thread,viewer:this.props.pageID})]})};return c}(b("React").Component);e.exports=a}),null);
__d("PagesMessagingInboxOverview.react",["cx","fbt","invariant","Bootloader","LeftRight.react","Link.react","MercuryFilters.bs","MercuryIDs","MessagingTag","MessengerParticipants.bs","MessengerState.bs","MessengerThreadlistFetcher.bs","P2BWWWNotificationConfig","PagesMessagingHomePageletLogger","PagesMessagingMessageSnippet.react","PagesMessagingRelativeTimestamp.react","Random","React","XPagesManagerMessagesController","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("immutable").Map;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c,d)||this;e.$4=function(){var a,c=e.props.pageInfo;((a=b("P2BWWWNotificationConfig").pageID)==null?void 0:a.toString())===c.id&&b("Bootloader").loadModules(["PageInboxEntryPointLogger","PageInboxEntryPointEvent","PageInboxEntryPoint","PageInboxEntryPointType"],function(a,b,d,e){a.log({badgingCount:c.unreadCount,event:b.CLICK,entryPoint:d.CHAT_BAR,entryPointType:e.ADMIN_HOVERCARD_INBOX_PREVIEW,pageID:c.id})},"PagesMessagingInboxOverview.react")};e.$1=new(b("PagesMessagingHomePageletLogger"))(!0);e.state={isFetching:!1};return e}var d=c.prototype;d.componentDidMount=function(){this.fetch(),this.$1.logEvent("render")};d.UNSAFE_componentWillReceiveProps=function(a){a.pageInfo!==this.props.pageInfo&&this.fetch()};d.fetch=function(){var a=this;if(this.state.isFetching)return;this.setState({isFetching:!0},function(){b("MessengerThreadlistFetcher.bs").fetchThreadlist(a.props.pageInfo.id,b("MessagingTag").INBOX,b("MercuryFilters.bs").unread,5,null,!0,function(b){return a.setState({isFetching:!1})})})};d.render=function(){var a=null;this.state.isFetching?a=this.$2():a=this.$3();return b("React").jsx("div",{className:this.props.className,children:a})};d.$2=function(){return b("React").jsx(b("PagesMessagingMessageSnippet.react"),{className:"_2iza _12f2",message:null,pageID:this.props.pageInfo.id,placement:this.props.placement})};d.$5=function(a){return b("XPagesManagerMessagesController").getURIBuilder().setString("page_token",this.props.pageInfo.uriToken).setString("threadid",b("MercuryIDs").getUserIDFromThreadID(a.thread.thread_id)).setString("ref",this.props.placement).getURI()};d.$6=function(a){__p&&__p();a=a[b("MessagingTag").INBOX]?a[b("MessagingTag").INBOX][b("MercuryFilters.bs").unread]:null;a=a?a.threadlist:null;if(!a||a.length===0)return null;a=this.props.showRandomMessage?a[Math.floor(b("Random").random()*a.length)]:a[0];a=b("MessengerState.bs").getThreadMetaNow(this.props.pageInfo.id,a);a||i(0,3277);var c=a.other_user_fbid;c||i(0,3278);c="fbid:"+c;c=b("MessengerParticipants.bs").getNow(c);return c==null?null:{senderImageSrc:c.image_src,senderName:c.name,senderShortName:c.short_name,thread:a,participants:j(b("immutable").Seq(a.participants).map(function(a){return[a,b("MessengerParticipants.bs").getNow(a)]}))}};d.$3=function(){var a=this;return b("React").jsx(b("MessengerState.bs").jsComponent,{fbid:this.props.pageInfo.id,children:function(c){c=b("MessengerState.bs").threadlistOrderMap(c);c=a.$6(c);if(c==null)return null;var d=null;a.props.placement==="aymt_homepage_panel"&&(d=b("React").jsxs(b("LeftRight.react"),{children:[b("React").jsx("div",{className:"_2iz9",children:h._("Latest Unread Message")}),b("React").jsx(b("PagesMessagingRelativeTimestamp.react"),{className:"_2iz6",shouldShorternTime:!1,utcTimestamp:c.thread.last_message_timestamp})]}));return b("React").jsxs(b("Link.react"),{className:"_2hlr",href:a.$5(c),onClick:a.$4,children:[d,b("React").jsx(b("PagesMessagingMessageSnippet.react"),{className:"_2iza",message:c,pageID:a.props.pageInfo.id,placement:a.props.placement})]})}})};return c}(b("React").Component);e.exports=a}),null);
__d("PagesMessagingInlineInboxView.react",["PagesMessagingInboxOverview.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("PagesMessagingInboxOverview.react"),{pageInfo:this.props.pageInfo,showRandomMessage:this.props.showRandomMessage,placement:this.props.placement})};return c}(b("React").Component);e.exports=a}),null);